<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>WebAppFind directory path demo</title>
    <!-- WebAppFind -->
    <script>

(function () {'use strict';

function $ (sel) {
    return document.querySelector(sel);
}

window.addEventListener('DOMContentLoaded', function () {
    window.addEventListener('message', function(e) {
        if (e.origin !== window.location.origin) { // PRIVACY AND SECURITY! (for viewing and saving, respectively)
            return;
        }
        var path;
        try {
            path = e.data.webappfind.directoryPath;
        }
        catch (undesiredMessageFormat) {
            return;
        }
        $('#dir').value = path;
    }, false);
    
    // Requesting the path in the following is not necessary, nor probably
    //   useful since the supplied path is not going to change!
    window.postMessage({webappfind: {command: 'directoryPath'}}, window.location.origin);
});

}());
    </script>
</head>
<body>
<div id="dir-container">
<textarea id="dir" cols="100" rows="30" placeholder="Loading..."></textarea>
</div>
</body>
</html>
