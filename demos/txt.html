<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>WebAppFind text editor demo</title>
    <!-- WebAppFind -->
    <link href="javascript.css" rel="stylesheet" />
    <script src="register.js"></script>
    <script type="module">

import WebAppFind from './webappfind.js';
/*
TODOS:
1. We could allow separate tabs when new pathIDs are obtained via our message listener
*/

function $ (sel) {
    return document.querySelector(sel);
}

const waf = new WebAppFind({
    view (content) {
        $('#text').value = content;
        $('#save').disabled = false;
    },
    saveEnd (pathID) {
        alert('save complete for pathID ' + pathID + '!');
    }
});

$('#save').addEventListener('click', function () {
    waf.save($('#text').value);
});

/*
    addRegistrationHandlers([{
        type: 'edittxt', info: 'Protocol for viewing local TXT files',
        instructions: 'Register this app as a handler for viewing local TXT files'
    }], 'http://127.0.0.1/webappfind/demos/txt.html?uri=%s');
*/

    </script>
</head>
<body>
<div id="actions"></div>
<div id="toolbar">
    <button id="save" disabled="disabled">Save</button>
</div>
<div id="txt-container">
<textarea id="text" cols="100" rows="30" placeholder="Loading..."></textarea>
</div>
</body>
</html>
